<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.35.1">
<meta name="crystal_docs.project_version" content="0.10.5">
<meta name="crystal_docs.project_name" content="halite">

  <meta name="crystal_docs.json_config_url" content="/halite/version.json">



<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

  <meta name="repository-name" content="halite">
  <title>halite 0.10.5</title>
  <script type="text/javascript">
  CrystalDocs.base_path = "";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="index.html">
          halite
        </a>
      </h1>

      <span class="project-version">
        0.10.5
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent " data-id="halite/Halite" data-name="halite">
      <a href="Halite.html">Halite</a>
      
        <ul>
  
  <li class=" " data-id="halite/Halite/Cache" data-name="halite::cache">
      <a href="Halite/Cache.html">Cache</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Chainable" data-name="halite::chainable">
      <a href="Halite/Chainable.html">Chainable</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Client" data-name="halite::client">
      <a href="Halite/Client.html">Client</a>
      
    </li>
  
  <li class="parent " data-id="halite/Halite/Exception" data-name="halite::exception">
      <a href="Halite/Exception.html">Exception</a>
      
        <ul>
  
  <li class=" " data-id="halite/Halite/Exception/APIError" data-name="halite::exception::apierror">
      <a href="Halite/Exception/APIError.html">APIError</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Exception/ClientError" data-name="halite::exception::clienterror">
      <a href="Halite/Exception/ClientError.html">ClientError</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Exception/ConnectionError" data-name="halite::exception::connectionerror">
      <a href="Halite/Exception/ConnectionError.html">ConnectionError</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Exception/EndlessRedirectError" data-name="halite::exception::endlessredirecterror">
      <a href="Halite/Exception/EndlessRedirectError.html">EndlessRedirectError</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Exception/Error" data-name="halite::exception::error">
      <a href="Halite/Exception/Error.html">Error</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Exception/FeatureError" data-name="halite::exception::featureerror">
      <a href="Halite/Exception/FeatureError.html">FeatureError</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Exception/RequestError" data-name="halite::exception::requesterror">
      <a href="Halite/Exception/RequestError.html">RequestError</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Exception/ResponseError" data-name="halite::exception::responseerror">
      <a href="Halite/Exception/ResponseError.html">ResponseError</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Exception/ServerError" data-name="halite::exception::servererror">
      <a href="Halite/Exception/ServerError.html">ServerError</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Exception/StateError" data-name="halite::exception::stateerror">
      <a href="Halite/Exception/StateError.html">StateError</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Exception/TimeoutError" data-name="halite::exception::timeouterror">
      <a href="Halite/Exception/TimeoutError.html">TimeoutError</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Exception/TooManyRedirectsError" data-name="halite::exception::toomanyredirectserror">
      <a href="Halite/Exception/TooManyRedirectsError.html">TooManyRedirectsError</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Exception/UnRegisterFeatureError" data-name="halite::exception::unregisterfeatureerror">
      <a href="Halite/Exception/UnRegisterFeatureError.html">UnRegisterFeatureError</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Exception/UnRegisterLoggerFormatError" data-name="halite::exception::unregisterloggerformaterror">
      <a href="Halite/Exception/UnRegisterLoggerFormatError.html">UnRegisterLoggerFormatError</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Exception/UnRegisterMimeTypeError" data-name="halite::exception::unregistermimetypeerror">
      <a href="Halite/Exception/UnRegisterMimeTypeError.html">UnRegisterMimeTypeError</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Exception/UnsupportedMethodError" data-name="halite::exception::unsupportedmethoderror">
      <a href="Halite/Exception/UnsupportedMethodError.html">UnsupportedMethodError</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Exception/UnsupportedSchemeError" data-name="halite::exception::unsupportedschemeerror">
      <a href="Halite/Exception/UnsupportedSchemeError.html">UnsupportedSchemeError</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Exception/UnsupportedStreamMethodError" data-name="halite::exception::unsupportedstreammethoderror">
      <a href="Halite/Exception/UnsupportedStreamMethodError.html">UnsupportedStreamMethodError</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="halite/Halite/Feature" data-name="halite::feature">
      <a href="Halite/Feature.html">Feature</a>
      
        <ul>
  
  <li class="parent " data-id="halite/Halite/Feature/Chain" data-name="halite::feature::chain">
      <a href="Halite/Feature/Chain.html">Chain</a>
      
        <ul>
  
  <li class=" " data-id="halite/Halite/Feature/Chain/Result" data-name="halite::feature::chain::result">
      <a href="Halite/Feature/Chain/Result.html">Result</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="halite/Halite/FeatureRegister" data-name="halite::featureregister">
      <a href="Halite/FeatureRegister.html">FeatureRegister</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/FormData" data-name="halite::formdata">
      <a href="Halite/FormData.html">FormData</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/HeaderLinkParser" data-name="halite::headerlinkparser">
      <a href="Halite/HeaderLinkParser.html">HeaderLinkParser</a>
      
    </li>
  
  <li class="parent " data-id="halite/Halite/Logging" data-name="halite::logging">
      <a href="Halite/Logging.html">Logging</a>
      
        <ul>
  
  <li class=" " data-id="halite/Halite/Logging/Abstract" data-name="halite::logging::abstract">
      <a href="Halite/Logging/Abstract.html">Abstract</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Logging/Common" data-name="halite::logging::common">
      <a href="Halite/Logging/Common.html">Common</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Logging/JSON" data-name="halite::logging::json">
      <a href="Halite/Logging/JSON.html">JSON</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Logging/Register" data-name="halite::logging::register">
      <a href="Halite/Logging/Register.html">Register</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="halite/Halite/MimeType" data-name="halite::mimetype">
      <a href="Halite/MimeType.html">MimeType</a>
      
        <ul>
  
  <li class=" " data-id="halite/Halite/MimeType/Adapter" data-name="halite::mimetype::adapter">
      <a href="Halite/MimeType/Adapter.html">Adapter</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/MimeType/JSON" data-name="halite::mimetype::json">
      <a href="Halite/MimeType/JSON.html">JSON</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="halite/Halite/Options" data-name="halite::options">
      <a href="Halite/Options.html">Options</a>
      
        <ul>
  
  <li class=" " data-id="halite/Halite/Options/Follow" data-name="halite::options::follow">
      <a href="Halite/Options/Follow.html">Follow</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Options/Timeout" data-name="halite::options::timeout">
      <a href="Halite/Options/Timeout.html">Timeout</a>
      
    </li>
  
  <li class=" " data-id="halite/Halite/Options/Type" data-name="halite::options::type">
      <a href="Halite/Options/Type.html">Type</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="halite/Halite/Redirector" data-name="halite::redirector">
      <a href="Halite/Redirector.html">Redirector</a>
      
    </li>
  
  <li class="parent " data-id="halite/Halite/Request" data-name="halite::request">
      <a href="Halite/Request.html">Request</a>
      
        <ul>
  
  <li class=" " data-id="halite/Halite/Request/Data" data-name="halite::request::data">
      <a href="Halite/Request/Data.html">Data</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="halite/Halite/Response" data-name="halite::response">
      <a href="Halite/Response.html">Response</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="halite/HTTP" data-name="http">
      <a href="HTTP.html">HTTP</a>
      
        <ul>
  
  <li class=" " data-id="halite/HTTP/Headers" data-name="http::headers">
      <a href="HTTP/Headers.html">Headers</a>
      
    </li>
  
  <li class=" " data-id="halite/URI/Params" data-name="uri::params">
      <a href="URI/Params.html">Params</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<p><img src="https://github.com/icyleaf/halite/raw/master/halite-logo-small.png" alt="halite-logo"/></p>

<h1><a id="halite" class="anchor" href="#halite">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Halite</h1>

<p><a href="https://github.com/crystal-lang/crystal"><img src="https://img.shields.io/badge/language-crystal-776791.svg" alt="Language"/></a>
<a href="https://github.com/icyleaf/halite/blob/master/CHANGELOG.md"><img src="https://img.shields.io/github/tag/icyleaf/halite.svg" alt="Tag"/></a>
<a href="https://github.com/icyleaf/halite/"><img src="https://img.shields.io/badge/source-github-brightgreen.svg" alt="Source"/></a>
<a href="https://icyleaf.github.io/halite/"><img src="https://img.shields.io/badge/document-api-brightgreen.svg" alt="Document"/></a>
<a href="https://circleci.com/gh/icyleaf/halite"><img src="https://img.shields.io/circleci/project/github/icyleaf/halite/master.svg?style=flat" alt="Build Status"/></a></p>

<p>HTTP Requests with a chainable REST API, built-in sessions and middleware written by <a href="https://crystal-lang.org/">Crystal</a>.
Inspired from the <strong>awesome</strong> Ruby's <a href="https://github.com/httprb/http">HTTP</a>/<a href="https://github.com/rest-client/rest-client">RESTClient</a>
and Python's <a href="https://github.com/requests/requests">requests</a>.</p>

<p>Build in Crystal version >= <code>v0.34.0</code>, this document valid with <a href="https://github.com/icyleaf/halite/blob/master/CHANGELOG.md">v0.10.5</a>.</p>

<h2><a id="index" class="anchor" href="#index">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Index</h2>

<p>&lt;!-- TOC --></p>

<ul><li><a href="#installation">Installation</a></li><li><a href="#usage">Usage</a></li><ul><li><a href="#making-requests">Making Requests</a></li><li><a href="#passing-parameters">Passing Parameters</a></li><li><a href="#query-string-parameters">Query string parameters</a></li><li><a href="#form-data">Form data</a></li><li><a href="#file-uploads-via-form-data">File uploads (via form data)</a></li><li><a href="#json-data">JSON data</a></li><li><a href="#raw-string">Raw String</a></li><li><a href="#passing-advanced-options">Passing advanced options</a></li><li><a href="#auth">Auth</a></li><li><a href="#user-agent">User Agent</a></li><li><a href="#headers">Headers</a></li><li><a href="#cookies">Cookies</a></li><li><a href="#redirects-and-history">Redirects and History</a></li><li><a href="#timeout">Timeout</a></li><li><a href="#https">HTTPS</a></li><li><a href="#response-handling">Response Handling</a></li><li><a href="#response-content">Response Content</a></li><li><a href="#json-content">JSON Content</a></li><li><a href="#parsing-content">Parsing Content</a></li><li><a href="#binary-data">Binary Data</a></li><li><a href="#error-handling">Error Handling</a></li><li><a href="#raise-for-status-code">Raise for status code</a></li></ul><li><a href="#middleware">Middleware</a></li><ul><li><a href="#write-a-simple-feature">Write a simple feature</a></li><li><a href="#write-a-interceptor">Write a interceptor</a></li></ul><li><a href="#advanced-usage">Advanced Usage</a></li><ul><li><a href="#configuring">Configuring</a></li><li><a href="#endpoint">Endpoint</a></li><li><a href="#sessions">Sessions</a></li><li><a href="#streaming-requests">Streaming Requests</a></li><li><a href="#logging">Logging</a></li><li><a href="#local-cache">Local Cache</a></li><li><a href="#link-headers">Link Headers</a>
&lt;!-- /TOC --></li></ul></ul>

<h2><a id="installation" class="anchor" href="#installation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Installation</h2>

<p>Add this to your application's <code>shard.yml</code>:</p>

<pre><code class="language-yaml">dependencies:
  halite:
    github: icyleaf/halite</code></pre>

<h2><a id="usage" class="anchor" href="#usage">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Usage</h2>

<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;halite&quot;</span></code></pre>

<h3><a id="making-requests" class="anchor" href="#making-requests">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Making Requests</h3>

<p>Make a GET request:</p>

<pre><code class="language-crystal"><span class="c"># Direct get url</span>
<span class="t">Halite</span>.get(<span class="s">&quot;http://httpbin.org/get&quot;</span>)

<span class="c"># Support NamedTuple as query params</span>
<span class="t">Halite</span>.get(<span class="s">&quot;http://httpbin.org/get&quot;</span>, params: {
  language: <span class="s">&quot;crystal&quot;</span>,
  shard: <span class="s">&quot;halite&quot;</span>
})

<span class="c"># Also support Hash as query params</span>
<span class="t">Halite</span>.get(<span class="s">&quot;http://httpbin.org/get&quot;</span>, headers: {
    <span class="s">&quot;Private-Token&quot;</span> => <span class="s">&quot;T0k3n&quot;</span>
  }, params: {
    <span class="s">&quot;language&quot;</span> => <span class="s">&quot;crystal&quot;</span>,
    <span class="s">&quot;shard&quot;</span> => <span class="s">&quot;halite&quot;</span>
  })

<span class="c"># And support chainable</span>
<span class="t">Halite</span>.header(private_token: <span class="s">&quot;T0k3n&quot;</span>)
      .get(<span class="s">&quot;http://httpbin.org/get&quot;</span>, params: {
        <span class="s">&quot;language&quot;</span> => <span class="s">&quot;crystal&quot;</span>,
        <span class="s">&quot;shard&quot;</span> => <span class="s">&quot;halite&quot;</span>
      })</code></pre>

<p>See also all <a href="https://icyleaf.github.io/halite/Halite/Chainable.html">chainable methods</a>.</p>

<p>Many other HTTP methods are available as well:</p>

<ul><li><code>get</code></li><li><code>head</code></li><li><code>post</code></li><li><code>put</code></li><li><code>delete</code></li><li><code>patch</code></li><li><code>options</code></li></ul>

<h3><a id="passing-parameters" class="anchor" href="#passing-parameters">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Passing Parameters</h3>

<h4><a id="query-string-parameters" class="anchor" href="#query-string-parameters">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Query string parameters</h4>

<p>Use the <code>params</code> argument to add query string parameters to requests:</p>

<pre><code class="language-crystal"><span class="t">Halite</span>.get(<span class="s">&quot;http://httpbin.org/get&quot;</span>, params: { <span class="s">&quot;firstname&quot;</span> => <span class="s">&quot;Olen&quot;</span>, <span class="s">&quot;lastname&quot;</span> => <span class="s">&quot;Rosenbaum&quot;</span> })</code></pre>

<h4><a id="form-data" class="anchor" href="#form-data">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Form data</h4>

<p>Use the <code>form</code> argument to pass data serialized as form encoded:</p>

<pre><code class="language-crystal"><span class="t">Halite</span>.post(<span class="s">&quot;http://httpbin.org/post&quot;</span>, form: { <span class="s">&quot;firstname&quot;</span> => <span class="s">&quot;Olen&quot;</span>, <span class="s">&quot;lastname&quot;</span> => <span class="s">&quot;Rosenbaum&quot;</span> })</code></pre>

<h4><a id="file-uploads-via-form-data" class="anchor" href="#file-uploads-via-form-data">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>File uploads (via form data)</h4>

<p>To upload files as if form data, construct the form as follows:</p>

<pre><code class="language-crystal"><span class="t">Halite</span>.post(<span class="s">&quot;http://httpbin.org/post&quot;</span>, form: {
  <span class="s">&quot;username&quot;</span> => <span class="s">&quot;Quincy&quot;</span>,
  <span class="s">&quot;avatar&quot;</span> => <span class="t">File</span>.open(<span class="s">&quot;/Users/icyleaf/quincy_avatar.png&quot;</span>)
})</code></pre>

<p>It is possible to upload multiple files:</p>

<pre><code class="language-crystal"><span class="t">Halite</span>.post(<span class="s">&quot;http://httpbin.org/post&quot;</span>, form: {
  photos: [
    <span class="t">File</span>.open(<span class="s">&quot;/Users/icyleaf/photo1.png&quot;</span>),
    <span class="t">File</span>.open(<span class="s">&quot;/Users/icyleaf/photo2.png&quot;</span>)
  ],
  album_name: <span class="s">&quot;samples&quot;</span>
})</code></pre>

<p>Or pass the name with <code>[]</code>:</p>

<pre><code class="language-crystal"><span class="t">Halite</span>.post(<span class="s">&quot;http://httpbin.org/post&quot;</span>, form: {
  <span class="s">&quot;photos[]&quot;</span> => [
    <span class="t">File</span>.open(<span class="s">&quot;/Users/icyleaf/photo1.png&quot;</span>),
    <span class="t">File</span>.open(<span class="s">&quot;/Users/icyleaf/photo2.png&quot;</span>)
  ],
  <span class="s">&quot;album_name&quot;</span> => <span class="s">&quot;samples&quot;</span>
})</code></pre>

<p>Multiple files can also be uploaded using both ways above, it depend on web server.</p>

<h4><a id="json-data" class="anchor" href="#json-data">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>JSON data</h4>

<p>Use the <code>json</code> argument to pass data serialized as body encoded:</p>

<pre><code class="language-crystal"><span class="t">Halite</span>.post(<span class="s">&quot;http://httpbin.org/post&quot;</span>, json: { <span class="s">&quot;firstname&quot;</span> => <span class="s">&quot;Olen&quot;</span>, <span class="s">&quot;lastname&quot;</span> => <span class="s">&quot;Rosenbaum&quot;</span> })</code></pre>

<h4><a id="raw-string" class="anchor" href="#raw-string">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Raw String</h4>

<p>Use the <code>raw</code> argument to pass raw string as body and set the <code>Content-Type</code> manually:</p>

<pre><code class="language-crystal"><span class="c"># Set content-type to &quot;text/plain&quot; by default</span>
<span class="t">Halite</span>.post(<span class="s">&quot;http://httpbin.org/post&quot;</span>, raw: <span class="s">&quot;name=Peter+Lee&amp;address=%23123+Happy+Ave&amp;language=C%2B%2B&quot;</span>)

<span class="c"># Set content-type manually</span>
<span class="t">Halite</span>.post(<span class="s">&quot;http://httpbin.org/post&quot;</span>,
  headers: {
    <span class="s">&quot;content-type&quot;</span> => <span class="s">&quot;application/json&quot;</span>
  },
  raw: <span class="s">%Q{{&quot;name&quot;:&quot;Peter Lee&quot;,&quot;address&quot;:&quot;23123 Happy Ave&quot;,&quot;language&quot;:&quot;C++&quot;}}</span>
)</code></pre>

<h3><a id="passing-advanced-options" class="anchor" href="#passing-advanced-options">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Passing advanced options</h3>

<h4><a id="auth" class="anchor" href="#auth">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Auth</h4>

<p>Use the <code>#basic_auth</code> method to perform <a href="http://tools.ietf.org/html/rfc2617">HTTP Basic Authentication</a> using a username and password:</p>

<pre><code class="language-crystal"><span class="t">Halite</span>.basic_auth(user: <span class="s">&quot;user&quot;</span>, pass: <span class="s">&quot;p@ss&quot;</span>).get(<span class="s">&quot;http://httpbin.org/get&quot;</span>)

<span class="c"># We can pass a raw authorization header using the auth method:</span>
<span class="t">Halite</span>.auth(<span class="s">&quot;Bearer dXNlcjpwQHNz&quot;</span>).get(<span class="s">&quot;http://httpbin.org/get&quot;</span>)</code></pre>

<h4><a id="user-agent" class="anchor" href="#user-agent">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>User Agent</h4>

<p>Use the <code>#user_agent</code> method to overwrite default one:</p>

<pre><code class="language-crystal"><span class="t">Halite</span>.user_agent(<span class="s">&quot;Crystal Client&quot;</span>).get(<span class="s">&quot;http://httpbin.org/user-agent&quot;</span>)</code></pre>

<h4><a id="headers" class="anchor" href="#headers">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Headers</h4>

<p>Here are two way to passing headers data:</p>

<h5><a id="1.-use-the-headers-method" class="anchor" href="#1.-use-the-headers-method">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>1. Use the <code>#headers</code> method</h5>

<pre><code class="language-crystal"><span class="t">Halite</span>.headers(private_token: <span class="s">&quot;T0k3n&quot;</span>).get(<span class="s">&quot;http://httpbin.org/get&quot;</span>)

<span class="c"># Also support Hash or NamedTuple</span>
<span class="t">Halite</span>.headers({ <span class="s">&quot;private_token&quot;</span> => <span class="s">&quot;T0k3n&quot;</span> }).get(<span class="s">&quot;http://httpbin.org/get&quot;</span>)

<span class="c"># Or</span>
<span class="t">Halite</span>.headers({ private_token: <span class="s">&quot;T0k3n&quot;</span> }).get(<span class="s">&quot;http://httpbin.org/get&quot;</span>)</code></pre>

<h5><a id="2.-use-the-headers-argument-in-the-available-request-method" class="anchor" href="#2.-use-the-headers-argument-in-the-available-request-method">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>2. Use the <code>headers</code> argument in the available request method:</h5>

<pre><code class="language-crystal"><span class="t">Halite</span>.get(<span class="s">&quot;http://httpbin.org/anything&quot;</span> , headers: { private_token: <span class="s">&quot;T0k3n&quot;</span> })

<span class="t">Halite</span>.post(<span class="s">&quot;http://httpbin.org/anything&quot;</span> , headers: { private_token: <span class="s">&quot;T0k3n&quot;</span> })</code></pre>

<h4><a id="cookies" class="anchor" href="#cookies">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Cookies</h4>

<h5><a id="passing-cookies-in-requests" class="anchor" href="#passing-cookies-in-requests">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Passing cookies in requests</h5>

<p>The <code>Halite.cookies</code> option can be used to configure cookies for a given request:</p>

<pre><code class="language-crystal"><span class="t">Halite</span>.cookies(session_cookie: <span class="s">&quot;6abaef100b77808ceb7fe26a3bcff1d0&quot;</span>)
      .get(<span class="s">&quot;http://httpbin.org/headers&quot;</span>)</code></pre>

<h5><a id="get-cookies-in-requests" class="anchor" href="#get-cookies-in-requests">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Get cookies in requests</h5>

<p>To obtain the cookies(cookie jar) for a given response, call the <code>#cookies</code> method:</p>

<pre><code class="language-crystal">r <span class="o">=</span> <span class="t">Halite</span>.get(<span class="s">&quot;http://httpbin.org/cookies?set?session_cookie=6abaef100b77808ceb7fe26a3bcff1d0&quot;</span>)
pp r.cookies
<span class="c"># =&gt; #&lt;HTTP::Cookies:0x10dbed980 @cookies={&quot;session_cookie&quot; =&gt;#&lt;HTTP::Cookie:0x10ec20f00 @domain=nil, @expires=nil, @extension=nil, @http_only=false, @name=&quot;session_cookie&quot;, @path=&quot;/&quot;, @secure=false, @value=&quot;6abaef100b77808ceb7fe26a3bcff1d0&quot;&gt;}&gt;</span></code></pre>

<h4><a id="redirects-and-history" class="anchor" href="#redirects-and-history">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Redirects and History</h4>

<h5><a id="automatically-following-redirects" class="anchor" href="#automatically-following-redirects">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Automatically following redirects</h5>

<p>The <code>Halite.follow</code> method can be used for automatically following redirects(Max up to 5 times):</p>

<pre><code class="language-crystal"><span class="c"># Set the cookie and redirect to http://httpbin.org/cookies</span>
<span class="t">Halite</span>.follow
      .get(<span class="s">&quot;http://httpbin.org/cookies/set/name/foo&quot;</span>)</code></pre>

<h5><a id="limiting-number-of-redirects" class="anchor" href="#limiting-number-of-redirects">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Limiting number of redirects</h5>

<p>As above, set over 5 times, it will raise a <code>Halite::TooManyRedirectsError</code>, but you can change less if you can:</p>

<pre><code class="language-crystal"><span class="t">Halite</span>.follow(<span class="n">2</span>)
      .get(<span class="s">&quot;http://httpbin.org/relative-redirect/5&quot;</span>)</code></pre>

<h5><a id="disabling-unsafe-redirects" class="anchor" href="#disabling-unsafe-redirects">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Disabling unsafe redirects</h5>

<p>It only redirects with <code>GET</code>, <code>HEAD</code> request and returns a <code>300</code>, <code>301</code>, <code>302</code> by default, otherwise it will raise a <code>Halite::StateError</code>.
We can disable it to set <code>:strict</code> to <code>false</code> if we want any method(verb) requests, in which case the <code>GET</code> method(verb) will be used for
that redirect:</p>

<pre><code class="language-crystal"><span class="t">Halite</span>.follow(strict: <span class="n">false</span>)
      .post(<span class="s">&quot;http://httpbin.org/relative-redirect/5&quot;</span>)</code></pre>

<h5><a id="history" class="anchor" href="#history">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>History</h5>

<p><code>Response#history</code> property list contains the <code>Response</code> objects that were created in order to complete the request.
The list is ordered from the oldest to most recent response.</p>

<pre><code class="language-crystal">r <span class="o">=</span> <span class="t">Halite</span>.follow
          .get(<span class="s">&quot;http://httpbin.org/redirect/3&quot;</span>)

r.uri
<span class="c"># =&gt; http://httpbin.org/get</span>

r.status_code
<span class="c"># =&gt; 200</span>

r.history
<span class="c"># =&gt; [</span>
<span class="c">#      #&lt;Halite::Response HTTP/1.1 302 FOUND {&quot;Location&quot; =&gt; &quot;/relative-redirect/2&quot; ...&gt;,</span>
<span class="c">#      #&lt;Halite::Response HTTP/1.1 302 FOUND {&quot;Location&quot; =&gt; &quot;/relative-redirect/1&quot; ...&gt;,</span>
<span class="c">#      #&lt;Halite::Response HTTP/1.1 302 FOUND {&quot;Location&quot; =&gt; &quot;/get&quot; ...&gt;,</span>
<span class="c">#      #&lt;Halite::Response HTTP/1.1 200 OK    {&quot;Content-Type&quot; =&gt; &quot;application/json&quot; ...&gt;</span>
<span class="c">#    ]</span></code></pre>

<p><strong>NOTE</strong>: It contains the <code>Response</code> object if you use <code>history</code> and HTTP was not a <code>30x</code>, For example:</p>

<pre><code class="language-crystal">r <span class="o">=</span> <span class="t">Halite</span>.get(<span class="s">&quot;http://httpbin.org/get&quot;</span>)
r.history.size <span class="c"># =&gt; 0</span>

r <span class="o">=</span> <span class="t">Halite</span>.follow
          .get(<span class="s">&quot;http://httpbin.org/get&quot;</span>)
r.history.size <span class="c"># =&gt; 1</span></code></pre>

<h4><a id="timeout" class="anchor" href="#timeout">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Timeout</h4>

<p>By default, the Halite does not enforce timeout on a request.
We can enable per operation timeouts by configuring them through the chaining API.</p>

<p>The <code>connect</code> timeout is the number of seconds Halite will wait for our client to establish a connection to a remote server call on the socket.</p>

<p>Once our client has connected to the server and sent the HTTP request,
the <code>read</code> timeout is the number of seconds the client will wait for the server to send a response.</p>

<pre><code class="language-crystal"><span class="c"># Separate set connect and read timeout</span>
<span class="t">Halite</span>.timeout(connect: <span class="n">3.0</span>, read: <span class="n">2</span>.minutes)
      .get(<span class="s">&quot;http://httpbin.org/anything&quot;</span>)

<span class="c"># Boath set connect and read timeout</span>
<span class="c"># The timeout value will be applied to both the connect and the read timeouts.</span>
<span class="t">Halite</span>.timeout(<span class="n">5</span>)
      .get(<span class="s">&quot;http://httpbin.org/anything&quot;</span>)</code></pre>

<h3><a id="https" class="anchor" href="#https">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>HTTPS</h3>

<p>The Halite supports HTTPS via Crystal's built-in OpenSSL module. All you have to do in order to use HTTPS is pass in an https://-prefixed URL.</p>

<p>To use client certificates, you can pass in a custom <code>OpenSSL::SSL::Context::Client</code> object containing the certificates you wish to use:</p>

<pre><code class="language-crystal">tls <span class="o">=</span> <span class="t">OpenSSL</span><span class="t">::</span><span class="t">SSL</span><span class="t">::</span><span class="t">Context</span><span class="t">::</span><span class="t">Client</span>.<span class="k">new</span>
tls.ca_certificates <span class="o">=</span> <span class="t">File</span>.expand_path(<span class="s">&quot;~/client.crt&quot;</span>)
tls.private_key <span class="o">=</span> <span class="t">File</span>.expand_path(<span class="s">&quot;~/client.key&quot;</span>)

<span class="t">Halite</span>.get(<span class="s">&quot;https://httpbin.org/anything&quot;</span>, tls: tls)</code></pre>

<h3><a id="response-handling" class="anchor" href="#response-handling">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Response Handling</h3>

<p>After an HTTP request, <code><a href="Halite/Response.html">Halite::Response</a></code> object have several useful methods. (Also see the <a href="https://icyleaf.github.io/halite/Halite/Response.html">API documentation</a>).</p>

<ul><li><strong>#body</strong>: The response body.</li><li><strong>#body_io</strong>: The response body io only available in streaming requests.</li><li><strong>#status_code</strong>: The HTTP status code.</li><li><strong>#content_type</strong>: The content type of the response.</li><li><strong>#content_length</strong>: The content length of the response.</li><li><strong>#cookies</strong>: A <code>HTTP::Cookies</code> set by server.</li><li><strong>#headers</strong>: A <code><a href="HTTP/Headers.html">HTTP::Headers</a></code> of the response.</li><li><strong>#links</strong>: A list of <code>Halite::HeaderLink</code> set from headers.</li><li><strong>#parse</strong>: (return value depends on MIME type) parse the body using a parser defined for the <code>#content_type</code>.</li><li><strong>#to_a</strong>: Return a <code>Hash</code> of status code, response headers and body as a string.</li><li><strong>#to_raw</strong>: Return a raw of response as a string.</li><li><strong>#to_s</strong>: Return response body as a string.</li><li><strong>#version</strong>: The HTTP version.</li></ul>

<h4><a id="response-content" class="anchor" href="#response-content">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Response Content</h4>

<p>We can read the content of the server's response by call <code>#body</code>:</p>

<pre><code class="language-crystal">r <span class="o">=</span> <span class="t">Halite</span>.get(<span class="s">&quot;http://httpbin.org/user-agent&quot;</span>)
r.body
<span class="c"># =&gt; {&quot;user-agent&quot;: &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.87 Safari/537.36&quot;}</span></code></pre>

<p>The <code>gzip</code> and <code>deflate</code> transfer-encodings are automatically decoded for you.
And requests will automatically decode content from the server. Most unicode charsets are seamlessly decoded.</p>

<h4><a id="json-content" class="anchor" href="#json-content">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>JSON Content</h4>

<p>There’s also a built-in a JSON adapter, in case you’re dealing with JSON data:</p>

<pre><code class="language-crystal">r <span class="o">=</span> <span class="t">Halite</span>.get(<span class="s">&quot;http://httpbin.org/user-agent&quot;</span>)
r.parse(<span class="s">&quot;json&quot;</span>)
r.parse <span class="c"># simplily by default</span>
<span class="c"># =&gt; {</span>
<span class="c"># =&gt;   &quot;user-agent&quot; =&gt; &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.87 Safari/537.36&quot;</span>
<span class="c"># =&gt; }</span></code></pre>

<h4><a id="parsing-content" class="anchor" href="#parsing-content">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Parsing Content</h4>

<p><code><a href="Halite/Response.html">Halite::Response</a></code> has a MIME type adapter system that you can use a decoder to parse the content,
we can inherit <code>Halite::MimeTypes::Adapter</code> to make our adapter:</p>

<pre><code class="language-crystal"><span class="c"># Define a MIME type adapter</span>
<span class="k">class</span> <span class="t">YAMLAdapter</span> <span class="o">&lt;</span> <span class="t">Halite</span><span class="t">::</span><span class="t">MimeType</span><span class="t">::</span><span class="t">Adapter</span>
  <span class="k">def</span> <span class="m">decode</span>(string)
    <span class="t">YAML</span>.parse(string)
  <span class="k">end</span>

  <span class="k">def</span> <span class="m">encode</span>(obj)
    obj.to_yaml
  <span class="k">end</span>
<span class="k">end</span>

<span class="c"># Register to Halite to invoke</span>
<span class="t">Halite</span><span class="t">::</span><span class="t">MimeType</span>.register <span class="t">YAMLAdapter</span>.<span class="k">new</span>, <span class="s">&quot;application/x-yaml&quot;</span>, <span class="s">&quot;yaml&quot;</span>, <span class="s">&quot;yml&quot;</span>

<span class="c"># Test it!</span>
r <span class="o">=</span> <span class="t">Halite</span>.get <span class="s">&quot;https://raw.githubusercontent.com/icyleaf/halite/master/shard.yml&quot;</span>
r.parse(<span class="s">&quot;yaml&quot;</span>) <span class="c"># or &quot;yml&quot;</span>
<span class="c"># =&gt; {&quot;name&quot; =&gt; &quot;halite&quot;, &quot;version&quot; =&gt; &quot;0.4.0&quot;, &quot;authors&quot; =&gt; [&quot;icyleaf &lt;icyleaf.cn@gmail.com&gt;&quot;], &quot;crystal&quot; =&gt; &quot;0.25.0&quot;, &quot;license&quot; =&gt; &quot;MIT&quot;}</span></code></pre>

<h4><a id="binary-data" class="anchor" href="#binary-data">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Binary Data</h4>

<p>Store binary data (eg, <code>application/octet-stream</code>) to file, you can use <a href="#streaming-requests">streaming requests</a>:</p>

<pre><code class="language-crystal"><span class="t">Halite</span>.get(<span class="s">&quot;https://github.com/icyleaf/halite/archive/master.zip&quot;</span>) <span class="k">do</span> <span class="o">|</span>response<span class="o">|</span>
  filename <span class="o">=</span> response.filename || <span class="s">&quot;halite-master.zip&quot;</span>
  <span class="t">File</span>.open(filename, <span class="s">&quot;w&quot;</span>) <span class="k">do</span> <span class="o">|</span>file<span class="o">|</span>
    <span class="t">IO</span>.copy(response.body_io, file)
  <span class="k">end</span>
<span class="k">end</span></code></pre>

<h3><a id="error-handling" class="anchor" href="#error-handling">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Error Handling</h3>

<ul><li>For any status code, a <code><a href="Halite/Response.html">Halite::Response</a></code> will be returned.</li><li>If request timeout, a <code>Halite::TimeoutError</code> will be raised.</li><li>If a request exceeds the configured number of maximum redirections, a <code>Halite::TooManyRedirectsError</code> will raised.</li><li>If request uri is http and configured tls context, a <code>Halite::RequestError</code> will raised.</li><li>If request uri is invalid, a <code>Halite::ConnectionError</code>/<code>Halite::UnsupportedMethodError</code>/<code>Halite::UnsupportedSchemeError</code> will raised.</li></ul>

<h4><a id="raise-for-status-code" class="anchor" href="#raise-for-status-code">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Raise for status code</h4>

<p>If we made a bad request(a 4xx client error or a 5xx server error response), we can raise with <code>Halite::Response.raise_for_status</code>.</p>

<p>But, since our <code>status_code</code> was not <code>4xx</code> or <code>5xx</code>, it returns <code>nil</code> when we call it:</p>

<pre><code class="language-crystal">urls <span class="o">=</span> [
  <span class="s">&quot;https://httpbin.org/status/404&quot;</span>,
  <span class="s">&quot;https://httpbin.org/status/500?foo=bar&quot;</span>,
  <span class="s">&quot;https://httpbin.org/status/200&quot;</span>,
]

urls.each <span class="k">do</span> <span class="o">|</span>url<span class="o">|</span>
  r <span class="o">=</span> <span class="t">Halite</span>.get url
  <span class="k">begin</span>
    r.raise_for_status
    p r.body
  <span class="k">rescue</span> ex : <span class="t">Halite</span><span class="t">::</span><span class="t">ClientError</span> <span class="o">|</span> <span class="t">Halite</span><span class="t">::</span><span class="t">ServerError</span>
    p <span class="s">&quot;[</span><span class="i">#{</span>ex.status_code<span class="i">}</span><span class="s">] </span><span class="i">#{</span>ex.status_message<span class="i">}</span><span class="s"> (</span><span class="i">#{</span>ex.<span class="k">class</span><span class="i">}</span><span class="s">)&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c"># =&gt; &quot;[404] not found error with url: https://httpbin.org/status/404  (Halite::ClientError)&quot;</span>
<span class="c"># =&gt; &quot;[500] internal server error error with url: https://httpbin.org/status/500?foo=bar  (Halite::ServerError)&quot;</span>
<span class="c"># =&gt; &quot;&quot;</span></code></pre>

<h2><a id="middleware" class="anchor" href="#middleware">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Middleware</h2>

<p>Halite now has middleware (a.k.a features) support providing a simple way to plug in intermediate custom logic
in your HTTP client, allowing you to monitor outgoing requests, incoming responses, and use it as an interceptor.</p>

<p>Available features:</p>

<ul><li><a href="#logging">Logging</a> (Yes, logging is based on feature, cool, aha!)</li><li><a href="#local-cache">Local Cache</a> (local storage, speed up in development)</li></ul>

<h3><a id="write-a-simple-feature" class="anchor" href="#write-a-simple-feature">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Write a simple feature</h3>

<p>Let's implement simple middleware that prints each request:</p>

<pre><code class="language-crystal"><span class="k">class</span> <span class="t">RequestMonister</span> <span class="o">&lt;</span> <span class="t">Halite</span><span class="t">::</span><span class="t">Feature</span>
  @label : <span class="t">String</span>
  <span class="k">def</span> <span class="m">initialize</span>(<span class="o">**</span>options)
    @label <span class="o">=</span> options.fetch(<span class="n">:label</span>, <span class="s">&quot;&quot;</span>)
  <span class="k">end</span>

  <span class="k">def</span> <span class="m">request</span>(request) : <span class="t">Halite</span><span class="t">::</span><span class="t">Request</span>
    puts @label
    puts request.verb
    puts request.uri
    puts request.body

    request
  <span class="k">end</span>

  <span class="t">Halite</span>.register_feature <span class="s">&quot;request_monster&quot;</span>, <span class="k">self</span>
<span class="k">end</span></code></pre>

<p>Then use it in Halite:</p>

<pre><code class="language-crystal"><span class="t">Halite</span>.use(<span class="s">&quot;request_monster&quot;</span>, label: <span class="s">&quot;testing&quot;</span>)
      .post(<span class="s">&quot;http://httpbin.org/post&quot;</span>, form: {name: <span class="s">&quot;foo&quot;</span>})

<span class="c"># Or configure to client</span>
client <span class="o">=</span> <span class="t">Halite</span><span class="t">::</span><span class="t">Client</span>.<span class="k">new</span> <span class="k">do</span>
  use <span class="s">&quot;request_monster&quot;</span>, label: <span class="s">&quot;testing&quot;</span>
<span class="k">end</span>

client.post(<span class="s">&quot;http://httpbin.org/post&quot;</span>, form: {name: <span class="s">&quot;foo&quot;</span>})

<span class="c"># =&gt; testing</span>
<span class="c"># =&gt; POST</span>
<span class="c"># =&gt; http://httpbin.org/post</span>
<span class="c"># =&gt; name=foo</span></code></pre>

<h3><a id="write-a-interceptor" class="anchor" href="#write-a-interceptor">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Write a interceptor</h3>

<p>Halite's killer feature is the <strong>interceptor</strong>, Use <code><a href="Halite/Feature/Chain.html">Halite::Feature::Chain</a></code> to process with two result:</p>

<ul><li><code>next</code>: perform and run next interceptor</li><li><code>return</code>: perform and return</li></ul>

<p>So, you can intercept and turn to the following registered features.</p>

<pre><code class="language-crystal"><span class="k">class</span> <span class="t">AlwaysNotFound</span> <span class="o">&lt;</span> <span class="t">Halite</span><span class="t">::</span><span class="t">Feature</span>
  <span class="k">def</span> <span class="m">intercept</span>(chain)
    response <span class="o">=</span> chain.perform
    response <span class="o">=</span> <span class="t">Halite</span><span class="t">::</span><span class="t">Response</span>.<span class="k">new</span>(chain.request.uri, <span class="n">404</span>, response.body, response.headers)
    chain.<span class="k">next</span>(response)
  <span class="k">end</span>

  <span class="t">Halite</span>.register_feature <span class="s">&quot;404&quot;</span>, <span class="k">self</span>
<span class="k">end</span>

<span class="k">class</span> <span class="t">PoweredBy</span> <span class="o">&lt;</span> <span class="t">Halite</span><span class="t">::</span><span class="t">Feature</span>
  <span class="k">def</span> <span class="m">intercept</span>(chain)
    <span class="k">if</span> response <span class="o">=</span> chain.response
      response.headers[<span class="s">&quot;X-Powered-By&quot;</span>] <span class="o">=</span> <span class="s">&quot;Halite&quot;</span>
      chain.<span class="k">return</span>(response)
    <span class="k">else</span>
      chain
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="t">Halite</span>.register_feature <span class="s">&quot;powered_by&quot;</span>, <span class="k">self</span>
<span class="k">end</span>

r <span class="o">=</span> <span class="t">Halite</span>.use(<span class="s">&quot;404&quot;</span>).use(<span class="s">&quot;powered_by&quot;</span>).get(<span class="s">&quot;http://httpbin.org/user-agent&quot;</span>)
r.status_code               <span class="c"># =&gt; 404</span>
r.headers[<span class="s">&quot;X-Powered-By&quot;</span>]   <span class="c"># =&gt; Halite</span>
r.body                      <span class="c"># =&gt; {&quot;user-agent&quot;:&quot;Halite/0.6.0&quot;}</span></code></pre>

<p>For more implementation details about the feature layer, see the <a href="https://github.com/icyleaf/halite/blob/master/src/halite/feature.cr#L2">Feature</a> class and <a href="https://github.com/icyleaf/halite/tree/master/src/halite/features">examples</a> and <a href="https://github.com/icyleaf/halite/blob/master/spec/spec_helper.cr#L23">specs</a>.</p>

<h2><a id="advanced-usage" class="anchor" href="#advanced-usage">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Advanced Usage</h2>

<h3><a id="configuring" class="anchor" href="#configuring">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Configuring</h3>

<p>Halite provides a traditional way to instance client, and you can configure any chainable methods with block:</p>

<pre><code class="language-crystal">client <span class="o">=</span> <span class="t">Halite</span><span class="t">::</span><span class="t">Client</span>.<span class="k">new</span> <span class="k">do</span>
  <span class="c"># Set basic auth</span>
  basic_auth <span class="s">&quot;username&quot;</span>, <span class="s">&quot;password&quot;</span>

  <span class="c"># Enable logging</span>
  logging <span class="n">true</span>

  <span class="c"># Set timeout</span>
  timeout <span class="n">10</span>.seconds

  <span class="c"># Set user agent</span>
  headers user_agent: <span class="s">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36&quot;</span>
<span class="k">end</span>

<span class="c"># You also can configure in this way</span>
client.accept(<span class="s">&quot;application/json&quot;</span>)

r <span class="o">=</span> client.get(<span class="s">&quot;http://httpbin.org/get&quot;</span>)</code></pre>

<h3><a id="endpoint" class="anchor" href="#endpoint">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Endpoint</h3>

<p>No more given endpoint per request, use <code>endpoint</code> will make the request URI shorter, you can set it in flexible way:</p>

<pre><code class="language-crystal">client <span class="o">=</span> <span class="t">Halite</span><span class="t">::</span><span class="t">Client</span>.<span class="k">new</span> <span class="k">do</span>
  endpoint <span class="s">&quot;https://gitlab.org/api/v4&quot;</span>
  user_agent <span class="s">&quot;Halite&quot;</span>
<span class="k">end</span>

client.get(<span class="s">&quot;users&quot;</span>)       <span class="c"># GET https://gitlab.org/api/v4/users</span>

<span class="c"># You can override the path by using an absolute path</span>
client.get(<span class="s">&quot;/users&quot;</span>)      <span class="c"># GET https://gitlab.org/users</span></code></pre>

<h3><a id="sessions" class="anchor" href="#sessions">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Sessions</h3>

<p>As like <a href="http://docs.python-requests.org/en/master/user/advanced/#session-objects">requests.Session()</a>, Halite built-in session by default.</p>

<p>Let's persist some cookies across requests:</p>

<pre><code class="language-crystal">client <span class="o">=</span> <span class="t">Halite</span><span class="t">::</span><span class="t">Client</span>.<span class="k">new</span>
client.get(<span class="s">&quot;http://httpbin.org/cookies/set?private_token=6abaef100b77808ceb7fe26a3bcff1d0&quot;</span>)
client.get(<span class="s">&quot;http://httpbin.org/cookies&quot;</span>)
<span class="c"># =&gt; 2018-06-25 18:41:05 +08:00 | request | GET    | http://httpbin.org/cookies/set?private_token=6abaef100b77808ceb7fe26a3bcff1d0</span>
<span class="c"># =&gt; 2018-06-25 18:41:06 +08:00 | response | 302    | http://httpbin.org/cookies/set?private_token=6abaef100b77808ceb7fe26a3bcff1d0 | text/html</span>
<span class="c"># =&gt; &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 3.2 Final//EN&quot;&gt;</span>
<span class="c"># =&gt; &lt;title&gt;Redirecting...&lt;/title&gt;</span>
<span class="c"># =&gt; &lt;h1&gt;Redirecting...&lt;/h1&gt;</span>
<span class="c"># =&gt; &lt;p&gt;You should be redirected automatically to target URL: &lt;a href=&quot;/cookies&quot;&gt;/cookies&lt;/a&gt;.  If not click the link.</span>
<span class="c"># =&gt; 2018-06-25 18:41:06 +08:00 | request | GET    | http://httpbin.org/cookies</span>
<span class="c"># =&gt; 2018-06-25 18:41:07 +08:00 | response | 200    | http://httpbin.org/cookies | application/json</span>
<span class="c"># =&gt; {&quot;cookies&quot;:{&quot;private_token&quot;:&quot;6abaef100b77808ceb7fe26a3bcff1d0&quot;}}</span></code></pre>

<p>All it support with <a href="https://icyleaf.github.io/halite/Halite/Chainable.html">chainable methods</a> in the other examples list in <a href="http://docs.python-requests.org/en/master/user/advanced/#session-objects">requests.Session</a>.</p>

<p>Note, however, that chainable methods will not be persisted across requests, even if using a session. This example will only send the cookies or headers with the first request, but not the second:</p>

<pre><code class="language-crystal">client <span class="o">=</span> <span class="t">Halite</span><span class="t">::</span><span class="t">Client</span>.<span class="k">new</span>
r <span class="o">=</span> client.cookies(<span class="s">&quot;username&quot;</span>: <span class="s">&quot;foobar&quot;</span>).get(<span class="s">&quot;http://httpbin.org/cookies&quot;</span>)
r.body <span class="c"># =&gt; {&quot;cookies&quot;:{&quot;username&quot;:&quot;foobar&quot;}}</span>

r <span class="o">=</span> client.get(<span class="s">&quot;http://httpbin.org/cookies&quot;</span>)
r.body <span class="c"># =&gt; {&quot;cookies&quot;:{}}</span>

<span class="t">If</span> you want to manually add cookies, headers (even features etc) to your session, use the methods start <span class="k">with</span> <span class="s">`with_`</span> <span class="k">in</span> <span class="s">`Halite::Options`</span>
to manipulate them:
</code></pre>

<p>r = client.get("http://httpbin.org/cookies")
r.body # => {"cookies":{}}</p>

<p>client.options.with_cookie("username": "foobar")
r = client.get("http://httpbin.org/cookies")
r.body # => {"cookies":{"username":"foobar"}}</p>

<pre><code class="language-crystal">
<span class="c">### Streaming Requests</span>

<span class="t">Similar</span> to [<span class="t">HTTP</span><span class="t">::</span><span class="t">Client</span>](https<span class="n">://</span>crystal<span class="o">-</span>lang.org<span class="s">/api/</span><span class="n">0.27</span>.<span class="n">0</span><span class="s">/HTTP/</span><span class="t">Client</span>.html) (search keyword <span class="s">&quot;Streaming&quot;</span>) usage <span class="k">with</span> a block,
you can easily use same way, but <span class="t">Halite</span> returns a <span class="s">`Halite::Response`</span> object:
</code></pre>

<p>r = Halite.get("http://httpbin.org/stream/5") do |response|
  response.status_code                  # => 200
  response.body_io.each_line do |line|</p>

<pre><code class="language-crystal">puts <span class="t">JSON</span>.parse(line)               <span class="c"># =&gt; {&quot;url&quot; =&gt; &quot;http://httpbin.org/stream/5&quot;, &quot;args&quot; =&gt; {}, &quot;headers&quot; =&gt; {&quot;Host&quot; =&gt; &quot;httpbin.org&quot;, &quot;Connection&quot; =&gt; &quot;close&quot;, &quot;User-Agent&quot; =&gt; &quot;Halite/0.8.0&quot;, &quot;Accept&quot; =&gt; &quot;*/*&quot;, &quot;Accept-Encoding&quot; =&gt; &quot;gzip, deflate&quot;}, &quot;id&quot; =&gt; 0_i64}</span></code></pre>

<p>end
end</p>

<pre><code class="language-crystal">
> **Warning**:
>
> `body_io` is avaiabled as an `IO` and not reentrant safe. Might throws a "Nil assertion failed" exception if there is no data in the `IO`
(such like `head` requests). Calling this method multiple times causes some of the received data being lost.
>
> One more thing, use streaming requests the response will always [enable redirect](#redirects-and-history) automatically.

### Logging

Halite does not enable logging on each request and response too.
We can enable per operation logging by configuring them through the chaining API.

By default, Halite will logging all outgoing HTTP requests and their responses(without binary stream) to `STDOUT` on DEBUG level.
You can configuring the following options:

- `logging`: Instance your `Halite::Logging::Abstract`, check [Use the custom logging](#use-the-custom-logging).
- `format`: Output format, built-in `common` and `json`, you can write your own.
- `file`: Write to file with path, works with `format`.
- `filemode`: Write file mode, works with `format`, by default is `a`. (append to bottom, create it if file is not exist)
- `skip_request_body`: By default is `false`.
- `skip_response_body`: By default is `false`.
- `skip_benchmark`: Display elapsed time, by default is `false`.
- `colorize`: Enable colorize in terminal, only apply in `common` format, by default is `true`.

> **NOTE**: `format` (`file` and `filemode`) and `logging` are conflict, you can not use both.

Let's try with it:
</code></pre>

<h1><a id="logging-json-request" class="anchor" href="#logging-json-request">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Logging json request</h1>

<p>Halite.logging</p>

<pre><code class="language-crystal">  .get(<span class="s">&quot;http://httpbin.org/get&quot;</span>, params: {name: <span class="s">&quot;foobar&quot;</span>})</code></pre>

<h1><a id="2018-06-25-183314-0800-request-get-httphttpbin.orggetnamefoobar" class="anchor" href="#2018-06-25-183314-0800-request-get-httphttpbin.orggetnamefoobar">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=> 2018-06-25 18:33:14 +08:00 | request  | GET    | http://httpbin.org/get?name=foobar</h1>

<h1><a id="2018-06-25-183315-0800-response-200-httphttpbin.orggetnamefoobar-381.32ms-applicationjson" class="anchor" href="#2018-06-25-183315-0800-response-200-httphttpbin.orggetnamefoobar-381.32ms-applicationjson">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=> 2018-06-25 18:33:15 +08:00 | response | 200    | http://httpbin.org/get?name=foobar | 381.32ms | application/json</h1>

<h1><a id="argsnamefoobarheadersacceptaccept-encodinggzip-deflateconnectionclosehosthttpbin.orguser-agenthalite0.3.2origin60.206.194.34urlhttphttpbin.orggetnamefoobar" class="anchor" href="#argsnamefoobarheadersacceptaccept-encodinggzip-deflateconnectionclosehosthttpbin.orguser-agenthalite0.3.2origin60.206.194.34urlhttphttpbin.orggetnamefoobar">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=> {"args":{"name":"foobar"},"headers":{"Accept":"<em>/</em>","Accept-Encoding":"gzip, deflate","Connection":"close","Host":"httpbin.org","User-Agent":"Halite/0.3.2"},"origin":"60.206.194.34","url":"http://httpbin.org/get?name=foobar"}</h1>

<h1><a id="logging-image-request" class="anchor" href="#logging-image-request">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Logging image request</h1>

<p>Halite.logging</p>

<pre><code class="language-crystal">  .get(<span class="s">&quot;http://httpbin.org/image/png&quot;</span>)</code></pre>

<h1><a id="2018-06-25-183415-0800-request-get-httphttpbin.orgimagepng" class="anchor" href="#2018-06-25-183415-0800-request-get-httphttpbin.orgimagepng">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=> 2018-06-25 18:34:15 +08:00 | request  | GET    | http://httpbin.org/image/png</h1>

<h1><a id="2018-06-25-183415-0800-response-200-httphttpbin.orgimagepng-imagepng" class="anchor" href="#2018-06-25-183415-0800-response-200-httphttpbin.orgimagepng-imagepng">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=> 2018-06-25 18:34:15 +08:00 | response | 200    | http://httpbin.org/image/png | image/png</h1>

<h1><a id="logging-with-options" class="anchor" href="#logging-with-options">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Logging with options</h1>

<p>Halite.logging(skip_request_body: true, skip_response_body: true)</p>

<pre><code class="language-crystal">  .post(<span class="s">&quot;http://httpbin.org/get&quot;</span>, form: {image: <span class="t">File</span>.open(<span class="s">&quot;halite-logo.png&quot;</span>)})</code></pre>

<h1><a id="2018-08-28-143319-0800-request-post-httphttpbin.orgpost" class="anchor" href="#2018-08-28-143319-0800-request-post-httphttpbin.orgpost">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=> 2018-08-28 14:33:19 +08:00 | request  | POST   | http://httpbin.org/post</h1>

<h1><a id="2018-08-28-143321-0800-response-200-httphttpbin.orgpost-1.61s-applicationjson" class="anchor" href="#2018-08-28-143321-0800-response-200-httphttpbin.orgpost-1.61s-applicationjson">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=> 2018-08-28 14:33:21 +08:00 | response | 200    | http://httpbin.org/post | 1.61s | application/json</h1>

<pre><code class="language-crystal">
<span class="c">#### JSON-formatted logging</span>

<span class="t">It</span> has <span class="t">JSON</span> formatted <span class="k">for</span> developer friendly logging.
</code></pre>

<p>Halite.logging(format: "json")</p>

<pre><code class="language-crystal">  .get(<span class="s">&quot;http://httpbin.org/get&quot;</span>, params: {name: <span class="s">&quot;foobar&quot;</span>})</code></pre>

<pre><code class="language-crystal">
<span class="c">#### Write to a log file</span>
</code></pre>

<h1><a id="write-plain-text-to-a-log-file" class="anchor" href="#write-plain-text-to-a-log-file">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Write plain text to a log file</h1>

<p>Halite.logging(file: "logs/halite.log", skip_benchmark: true, colorize: false)</p>

<pre><code class="language-crystal">  .get(<span class="s">&quot;http://httpbin.org/get&quot;</span>, params: {name: <span class="s">&quot;foobar&quot;</span>})</code></pre>

<h1><a id="write-json-data-to-a-log-file" class="anchor" href="#write-json-data-to-a-log-file">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Write json data to a log file</h1>

<p>Halite.logging(format: "json", file: "logs/halite.log")</p>

<pre><code class="language-crystal">  .get(<span class="s">&quot;http://httpbin.org/get&quot;</span>, params: {name: <span class="s">&quot;foobar&quot;</span>})</code></pre>

<pre><code class="language-crystal">
<span class="c">#### Use the custom logging</span>

<span class="t">Creating</span> the custom logging by integration <span class="s">`Halite::Logging::Abstract`</span> <span class="k">abstract</span> <span class="k">class</span>.
<span class="t">Here</span> has two methods must be implement: <span class="s">`#request`</span> and <span class="s">`#response`</span>.
</code></pre>

<p>class CustomLogging &lt; Halite::Logging::Abstract
  def request(request)</p>

<pre><code class="language-crystal">@logger.info { <span class="s">&quot;| &gt;&gt; | %s | %s %s&quot;</span> <span class="o">%</span> [request.verb, request.uri, request.body] }</code></pre>

<p>end</p>

<p>def response(response)</p>

<pre><code class="language-crystal">@logger.info { <span class="s">&quot;| &lt;&lt; | %s | %s %s&quot;</span> <span class="o">%</span> [response.status_code, response.uri, response.content_type] }</code></pre>

<p>end
end</p>

<h1><a id="add-to-adapter-list-optional" class="anchor" href="#add-to-adapter-list-optional">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Add to adapter list (optional)</h1>

<p>Halite::Logging.register "custom", CustomLogging.new</p>

<p>Halite.logging(logging: CustomLogging.new)</p>

<pre><code class="language-crystal">  .get(<span class="s">&quot;http://httpbin.org/get&quot;</span>, params: {name: <span class="s">&quot;foobar&quot;</span>})</code></pre>

<h1><a id="we-can-also-call-it-use-format-name-if-you-added-it." class="anchor" href="#we-can-also-call-it-use-format-name-if-you-added-it.">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>We can also call it use format name if you added it.</h1>

<p>Halite.logging(format: "custom")</p>

<pre><code class="language-crystal">  .get(<span class="s">&quot;http://httpbin.org/get&quot;</span>, params: {name: <span class="s">&quot;foobar&quot;</span>})</code></pre>

<h1><a id="2017-12-13-164013-0800-get-httphttpbin.orggetnamefoobar" class="anchor" href="#2017-12-13-164013-0800-get-httphttpbin.orggetnamefoobar">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=> 2017-12-13 16:40:13 +08:00 | >> | GET | http://httpbin.org/get?name=foobar</h1>

<h1><a id="2017-12-13-164015-0800-200-httphttpbin.orggetnamefoobar-applicationjson" class="anchor" href="#2017-12-13-164015-0800-200-httphttpbin.orggetnamefoobar-applicationjson">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=> 2017-12-13 16:40:15 +08:00 | &lt;&lt; | 200 | http://httpbin.org/get?name=foobar application/json</h1>

<pre><code class="language-crystal">
<span class="c">### Local Cache</span>

<span class="t">Local</span> cache feature is caching responses easily <span class="k">with</span> <span class="t">Halite</span> through an chainable method that is simple and elegant
yet powerful. <span class="t">Its</span> aim is to focus on the <span class="t">HTTP</span> part <span class="k">of</span> caching and <span class="k">do</span> not worrying about how stuff stored, api rate limiting
even works without network(offline).

<span class="t">It</span> has the following options:

<span class="o">-</span> <span class="s">`file`</span>: <span class="t">Load</span> cache from file. it conflict <span class="k">with</span> <span class="s">`path`</span> and <span class="s">`expires`</span>.
<span class="o">-</span> <span class="s">`path`</span>: <span class="t">The</span> path <span class="k">of</span> cache, default is <span class="s">&quot;/tmp/halite/cache/&quot;</span>
<span class="o">-</span> <span class="s">`expires`</span>: <span class="t">The</span> expires time <span class="k">of</span> cache, default is never expires.
<span class="o">-</span> <span class="s">`debug`</span>: <span class="t">The</span> debug mode <span class="k">of</span> cache, default is <span class="s">`true`</span>

<span class="t">With</span> debug mode, cached response it always included some headers information:

<span class="o">-</span> <span class="s">`X-Halite-Cached-From`</span>: <span class="t">Cache</span> source (cache or file)
<span class="o">-</span> <span class="s">`X-Halite-Cached-Key`</span>: <span class="t">Cache</span> key <span class="k">with</span> verb, uri and body (<span class="k">return</span> <span class="k">with</span> cache, not <span class="s">`file`</span> passed)
<span class="o">-</span> <span class="s">`X-Halite-Cached-At`</span>:  <span class="t">Cache</span> created time
<span class="o">-</span> <span class="s">`X-Halite-Cached-Expires-At`</span>: <span class="t">Cache</span> expired time (<span class="k">return</span> <span class="k">with</span> cache, not <span class="s">`file`</span> passed)
</code></pre>

<p>Halite.use("cache").get "http://httpbin.org/anything"     # request a HTTP
r = Halite.use("cache").get "http://httpbin.org/anything" # request from local storage
r.headers                                                 # => {..., "X-Halite-Cached-At" => "2018-08-30 10:41:14 UTC", "X-Halite-Cached-By" => "Halite", "X-Halite-Cached-Expires-At" => "2018-08-30 10:41:19 UTC", "X-Halite-Cached-Key" => "2bb155e6c8c47627da3d91834eb4249a"}}</p>

<pre><code class="language-crystal">
<span class="c">### Link Headers</span>

<span class="t">Many</span> <span class="t">HTTP</span> <span class="t">APIs</span> feature [<span class="t">Link</span> headers](https<span class="n">://</span>tools.ietf.org<span class="s">/html/</span>rfc5988). <span class="t">GitHub</span> uses
these <span class="k">for</span> [pagination](https<span class="n">://</span>developer.github.com<span class="s">/v3/</span><span class="c">#pagination) in their API, for example:</span>
</code></pre>

<p>r = Halite.get "https://api.github.com/users/icyleaf/repos?page=1&per_page=2"
r.links</p>

<h1><a id="next" class="anchor" href="#next">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=> {"next" =></h1>

<h1><a id="haliteheader-link" class="anchor" href="#haliteheader-link">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=>   Halite::HeaderLink(</h1>

<h1><a id="params" class="anchor" href="#params">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=>    @params={},</h1>

<h1><a id="relnext" class="anchor" href="#relnext">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=>    @rel="next",</h1>

<h1><a id="targethttpsapi.github.comuser17814repospage2per-page2" class="anchor" href="#targethttpsapi.github.comuser17814repospage2per-page2">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=>    @target="https://api.github.com/user/17814/repos?page=2&per_page=2"),</h1>

<h1><a id="last" class="anchor" href="#last">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=>  "last" =></h1>

<h1><a id="haliteheader-link" class="anchor" href="#haliteheader-link">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=>   Halite::HeaderLink(</h1>

<h1><a id="params" class="anchor" href="#params">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=>    @params={},</h1>

<h1><a id="rellast" class="anchor" href="#rellast">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=>    @rel="last",</h1>

<h1><a id="targethttpsapi.github.comuser17814repospage41per-page2" class="anchor" href="#targethttpsapi.github.comuser17814repospage41per-page2">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=>    @target="https://api.github.com/user/17814/repos?page=41&per_page=2")}</h1>

<p>r.links["next"]</p>

<h1><a id="httpsapi.github.comuser17814repospage2per-page2" class="anchor" href="#httpsapi.github.comuser17814repospage2per-page2">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=> "https://api.github.com/user/17814/repos?page=2&per_page=2"</h1>

<p>r.links["next"].params</p>

<h1><a id="" class="anchor" href="#">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>=> {}</h1>

<pre><code class="language-crystal">
<span class="c">## Help and Discussion</span>

<span class="t">You</span> can browse the <span class="t">API</span> documents:

https<span class="n">://</span>icyleaf.github.io<span class="s">/halite/</span>

<span class="t">You</span> can browse the all chainable methods:

https<span class="n">://</span>icyleaf.github.io<span class="s">/halite/</span><span class="t">Halite</span><span class="s">/Chainable.html

You can browse the Changelog:

https:/</span><span class="s">/github.com/</span>icyleaf<span class="s">/halite/</span>blob<span class="s">/master/</span><span class="t">CHANGELOG</span>.md

<span class="t">If</span> you have found a bug, please create a issue here:

https<span class="n">://</span>github.com<span class="s">/icyleaf/</span>halite<span class="s">/issues/</span><span class="k">new</span>

<span class="c">## Donate</span>

<span class="t">Halite</span> is a open source, collaboratively funded project. <span class="t">If</span> you run a business and are using <span class="t">Halite</span> <span class="k">in</span> a revenue<span class="o">-</span>generating product,
it would make business sense to sponsor <span class="t">Halite</span> development. <span class="t">Individual</span> users are also welcome to make a one time donation
<span class="k">if</span> <span class="t">Halite</span> has helped you <span class="k">in</span> your work or personal projects.

<span class="t">You</span> can donate via [<span class="t">Paypal</span>](https<span class="n">://</span>www.paypal.me<span class="s">/icyleaf/</span><span class="n">5</span>).

<span class="c">## How to Contribute</span>

<span class="t">Your</span> contributions are always welcome! <span class="t">Please</span> submit a pull request or create an issue to add a <span class="k">new</span> question, bug or feature to the list.

<span class="t">All</span> [<span class="t">Contributors</span>](https<span class="n">://</span>github.com<span class="s">/icyleaf/</span>halite<span class="s">/graphs/</span>contributors) are on the wall.

<span class="c">## You may also like</span>

<span class="o">-</span> [totem](https<span class="n">://</span>github.com<span class="s">/icyleaf/</span>totem) <span class="o">-</span> <span class="t">Load</span> and parse a configuration file or string <span class="k">in</span> <span class="t">JSON</span>, <span class="t">YAML</span>, dotenv formats.
<span class="o">-</span> [markd](https<span class="n">://</span>github.com<span class="s">/icyleaf/</span>markd) <span class="o">-</span> <span class="t">Yet</span> another markdown parser built <span class="k">for</span> speed, <span class="t">Compliant</span> to <span class="t">CommonMark</span> specification.
<span class="o">-</span> [poncho](https<span class="n">://</span>github.com<span class="s">/icyleaf/</span>poncho) <span class="o">-</span> <span class="t">A</span> .env parser<span class="s">/loader improved for performance.
- [popcorn](https:/</span><span class="s">/github.com/</span>icyleaf<span class="s">/popcorn) - Easy and Safe casting from one type to another.
- [fast-crystal](https:/</span><span class="s">/github.com/</span>icyleaf<span class="s">/fast-crystal) - 💨 Writing Fast Crystal 😍 -- Collect Common Crystal idioms.

## License

[MIT License](https:/</span><span class="s">/github.com/</span>icyleaf<span class="s">/halite/</span>blob<span class="s">/master/</span><span class="t">LICENSE</span>) © icyleaf</code></pre>
</div>
</body>
</html>
